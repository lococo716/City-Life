<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mafia Wars Web</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app-shell">
   <header class="topbar">
  <div class="brand">
    <div class="brand__dot"></div>
    <div class="brand__text">
      <div class="brand__title">Underworld</div>
      <div class="brand__subtitle">Mafia Wars‚Äìstyle web game</div>
    </div>
  </div>

  <div class="hud">
    <div class="pill" title="Money">
      <span class="pill__label">üíµ</span>
      <span id="hudMoney" class="pill__value">$0</span>
    </div>

    <div class="pill" title="Level">
      <span class="pill__label">‚≠ê</span>
      <span id="hudLevel" class="pill__value">Lv 1</span>
    </div>

    <div class="pill" title="Title">
      <span class="pill__label">üè∑Ô∏è</span>
      <span id="hudTitle" class="pill__value">Street Rat</span>
    </div>

    <!-- NEW: TOP BARS -->
    <div class="hud-meters">
      <!-- XP -->
      <div class="hud-meter" title="XP">
        <div class="hud-meter__top">
          <span class="hud-meter__label">XP</span>
          <span class="hud-meter__text" id="hudXpText">0 / 100</span>
        </div>
        <div class="hud-bar">
          <div class="hud-bar__fill" id="hudXpBar"></div>
        </div>
      </div>

      <!-- ENERGY + PLUS -->
      <div class="hud-meter" title="Energy">
        <div class="hud-meter__top">
          <span class="hud-meter__label">Energy</span>
          <span class="hud-meter__text" id="hudEnergyText">0/0</span>
          <button class="hud-plus" type="button" title="Use Energy Items"
            data-action="openQuickUse" data-kind="energy">Ôºã</button>
        </div>
        <div class="hud-bar hud-bar--energy">
          <div class="hud-bar__fill" id="hudEnergyBar"></div>
        </div>
      </div>

      <!-- HEALTH + PLUS -->
      <div class="hud-meter" title="Health">
        <div class="hud-meter__top">
          <span class="hud-meter__label">Health</span>
          <span class="hud-meter__text" id="hudHealthText">0/0</span>
          <button class="hud-plus" type="button" title="Use Healing Items"
            data-action="openQuickUse" data-kind="healing">Ôºã</button>
        </div>
        <div class="hud-bar hud-bar--health">
          <div class="hud-bar__fill" id="hudHealthBar"></div>
        </div>
      </div>
    </div>
  </div>
</header>

      <nav class="nav" id="topNav">
      <button class="nav__btn" data-route="crimes">Crimes</button>
      <button class="nav__btn" data-route="fights">Fights</button>
      <button class="nav__btn" data-route="gym">Gym</button>
      <button class="nav__btn" data-route="shop">Shop</button>
      <button class="nav__btn" data-route="arms">Arms Dealer</button>
      <button class="nav__btn" data-route="properties">Properties</button>
      <button class="nav__btn" data-route="missions">Missions</button>
      <button class="nav__btn nav__btn--profile" data-route="profile">Profile</button>
    </nav>

    <main class="main">
      <section class="panel" id="systemBanner" aria-live="polite"></section>

     
      <!-- ROUTED PAGES -->
      <section class="page" id="page-crimes" data-page="crimes"></section>
      <section class="page" id="page-fights" data-page="fights" hidden></section>
      <section class="page" id="page-gym" data-page="gym" hidden></section>
      <section class="page" id="page-shop" data-page="shop" hidden></section>
      <section class="page" id="page-arms" data-page="arms" hidden></section>
      <section class="page" id="page-properties" data-page="properties" hidden></section>
      <section class="page" id="page-missions" data-page="missions" hidden></section>

     <!-- PROFILE "SEPARATE PAGE" + SUBPAGES -->
<section class="page page--profile" id="page-profile" data-page="profile" hidden>
  <div class="profile-shell">
    <div class="profile-header card card--premium">
      <div class="profile-id">
        <div class="avatar" id="profileAvatar">üôÇ</div>
        <div class="profile-id__meta">
          <div class="profile-id__name" id="profileName">Player</div>
          <div class="profile-id__badges">
            <span class="badge" id="profileTitleBadge">Street Rat</span>
            <span class="badge badge--outline" id="profileSpecBadge">Specialization</span>
          </div>
        </div>
        <button class="btn btn--secondary btn--small" data-action="changeAvatar">Change Emoji</button>
      </div>

      <div class="stat">
        <div class="stat__label">üíé Gems</div>
        <div class="stat__value" id="statGems">0</div>
      </div>

      <div class="meters">
        <div class="meter">
          <div class="meter__top">
            <span>XP</span>
            <span id="xpText">0 / 100</span>
          </div>
          <div class="bar"><div class="bar__fill" id="xpBar"></div></div>
        </div>

        <div class="meter">
          <div class="meter__top">
            <span>Energy</span>
            <span id="energyText">0/0</span>
          </div>
          <div class="bar bar--energy"><div class="bar__fill" id="energyBar"></div></div>
        </div>

        <div class="meter">
          <div class="meter__top">
            <span>Health</span>
            <span id="healthText">0/0</span>
          </div>
          <div class="bar bar--health"><div class="bar__fill" id="healthBar"></div></div>
        </div>
      </div>

      <div class="stat-grid">
        <div class="stat">
          <div class="stat__label">Level</div>
          <div class="stat__value" id="statLevel">1</div>
        </div>
        <div class="stat">
          <div class="stat__label">Attack</div>
          <div class="stat__value" id="statAtk">0</div>
        </div>
        <div class="stat">
          <div class="stat__label">Defense</div>
          <div class="stat__value" id="statDef">0</div>
        </div>
        <div class="stat">
          <div class="stat__label">Passive Income</div>
          <div class="stat__value" id="statIncome">$0/hr</div>
        </div>
        <div class="stat">
          <div class="stat__label">Jail</div>
          <div class="stat__value" id="statJail">No</div>
        </div>
        <div class="stat">
          <div class="stat__label">KO</div>
          <div class="stat__value" id="statKO">No</div>
        </div>
      </div>
    </div>

    <div class="profile-body">
      <section class="profile-view" id="profileView-overview" data-profile-view="overview">
        <div class="section-title">My Stuff</div>
        <div class="hub-grid">
          <button class="card hub-card" data-action="openProfileView" data-view="inventory">
            <div class="hub-card__title">üéí Inventory</div>
            <div class="hub-card__text">Food, healing, and items you own.</div>
          </button>
          <button class="card hub-card" data-action="openProfileView" data-view="gear">
            <div class="hub-card__title">üó°Ô∏è Weapons & Armor</div>
            <div class="hub-card__text">View purchases and equip gear.</div>
          </button>
          <button class="card hub-card" data-action="openProfileView" data-view="props">
            <div class="hub-card__title">üè† Properties</div>
            <div class="hub-card__text">Owned buildings, income, and upgrades.</div>
          </button>
        </div>

        <div class="section-title">Recent Activity</div>
        <div class="card log" id="activityLog"></div>

        <!-- ADMIN TOOLS (Profile only) -->
        <div class="card" id="adminPanel" hidden style="margin-top:14px;">
          <div class="section-title" style="margin-top:0;">üõ†Ô∏è Admin Tools</div>

          <div class="grid grid--2">
            <button class="btn btn--small btn--primary" data-action="adminMoney">
              +$10,000
            </button>

            <button class="btn btn--small btn--primary" data-action="adminXP">
              +500 XP
            </button>

            <button class="btn btn--small btn--success" data-action="adminRefill">
              Refill Energy & Health
            </button>

            <button class="btn btn--small btn--danger" data-action="adminClearJail">
              Clear Jail
            </button>

            <button class="btn btn--small btn--primary" data-action="adminGems">
              +100 üíé Gems
            </button>
          </div>
        </div>

        <!-- LOGOUT (Profile only) -->
        <div class="card" style="margin-top:14px;">
          <button class="btn btn--danger btn--small" data-action="logout">
            Logout
          </button>
        </div>
      </section>

      <section class="profile-view" id="profileView-inventory" data-profile-view="inventory" hidden>
        <div class="subhead">
          <button class="btn btn--secondary btn--small" data-action="openProfileView" data-view="overview">‚Üê Back</button>
          <div class="subhead__title">Inventory</div>
        </div>
        <div class="card" id="profileInventory"></div>
      </section>

      <section class="profile-view" id="profileView-gear" data-profile-view="gear" hidden>
        <div class="subhead">
          <button class="btn btn--secondary btn--small" data-action="openProfileView" data-view="overview">‚Üê Back</button>
          <div class="subhead__title">Weapons & Armor</div>
        </div>
        <div class="card" id="profileGear"></div>
      </section>

      <section class="profile-view" id="profileView-props" data-profile-view="props" hidden>
        <div class="subhead">
          <button class="btn btn--secondary btn--small" data-action="openProfileView" data-view="overview">‚Üê Back</button>
          <div class="subhead__title">Properties</div>
        </div>
        <div class="card" id="profileProps"></div>
        <div class="hint">Offline property income is capped at <b>4 hours</b>.</div>
      </section>
    </div>
  </div>
</section>
</main>

<footer class="footer">
  <div class="footer__left">Tip: GitHub Pages friendly. Everything saves in your browser (localStorage).</div>
  <div class="footer__right">
    <button class="btn btn--danger btn--small" data-action="hardReset">Reset Save</button>
  </div>
</footer>
</div>

 <!-- QUICK USE POPUP (NEW) -->
<div class="quickuse" id="quickUse" hidden>
  <div class="quickuse__panel">
    <div class="quickuse__head">
      <div class="quickuse__title" id="quickUseTitle">Use Items</div>
      <button class="btn btn--secondary btn--small" type="button"
        data-action="closeQuickUse">Close</button>
    </div>
    <div class="quickuse__body" id="quickUseBody">
      <!-- Filled by JS in Patch 2/3 -->
      <div class="muted">No items.</div>
    </div>
  </div>
</div>
<!-- AUTH OVERLAY (LOGIN / CREATE ACCOUNT) -->
<div class="auth" id="auth" hidden>
  <div class="auth__panel card">
    <div class="section-title" style="margin-top:0;">Login</div>
    <div class="muted" id="authMsg" style="margin-bottom:10px;"></div>

    <div class="grid" style="gap:10px;">
      <label class="muted" style="font-size:12px;">Username</label>
      <input id="authUser" autocomplete="username" />

      <label class="muted" style="font-size:12px;">Password</label>
      <input id="authPass" type="password" autocomplete="current-password" />

      <div class="grid grid--2" style="gap:10px; margin-top:8px;">
        <button class="btn btn--primary" data-action="login">Log In</button>
        <button class="btn btn--secondary" data-action="createAccount">Create</button>
      </div>

      <div class="hr"></div>

      <button class="btn btn--danger" data-action="logout">Log Out</button>
    </div>
  </div>
</div>

<div class="toast" id="toast" hidden></div>

<script src="./app.js?v=fix1"></script>
</body>
</html>

